# 平田エクスプレスPremium(HirataExPressReiwa)
このレポジトリでは、従来のHirataExPressの仕様を踏まえ、新たに「単語カードの有償提供」や、選択式問題などに対応し、HTML5ならではの機能を今後積極的に取り入れるなどして、「令和時代のHirataExPress」を作る。  

## HirataExPressとは
Hirataは開発者の名前。ExPressはExercise(鍛える)とPress(押し込む)とExpress(急行)の3つの意味を持つ造語。  
一言でいうなら、利用者の脳に次のプログラムをインストールするアプリである。  

```
do
{
    暗記
}
while(覚える)
```

出題者はテキストファイル形式で簡単に問題と答えを設定でき、回答者は「分かった！」と自信を持って言えるまで、苦手な問題を何度も解き直しができるというアプリ。

暗記問題の詰め込みに有用である他、穴埋め問題の出題にも最適化されている。  
その為、数学などでパターン問題を繰り返し解く目的でも使える。  
「考え方を暗記する特急アプリ」というコンセプトで開発された。  

## HirataExPressReiwa開発にあたって
旧HirataExPressにおける技術的な反省点は、コードが冗長で整理されていないがために、後からアップデートや修正などをすることができなかったことである。  

これは、何か新しいサービスに特化したオーダーメイド版のHirataExPressの開発がしたくなっても、できないということを意味する。

そこで、シンプルかつ体系的にプログラムを組むことが、なにより重要な注意点となる。

### lcrp互換プログラミング  

その上で、lcrp隠蔽のしやすいコードの書き方(今後これを「lcrp互換プログラミング」と呼ぶ)を徹底する。このレポジトリにあるすべてのコードはlcrp互換プログラミングで書かれる。  

lcrpについては [こちら](https://github.com/17ec084/grade3-1/tree/master/licenseContract) で詳細に述べている。  

これは、今後ユニークなサービスを展開することになった場合にも活かせるであろうし、  
ライセンス認証を応用して、単語情報(今後、暗記すべき実体を「単語」と呼ぶ)の有償提供にも活かしたいからである。  

今回の場合は単語情報のみを非公開にできればよいため、次のようにすればよい。

- 単語情報を返す関数だけを隠蔽する

本来のlcrpでは、隠蔽する関数の段階を選ぶことで、顧客に公開するコードの抽象度を調整することができる。  

そのため、関数には段階が積極的に発生するように書くべきである。  

具体例として、「通勤」をプログラム言語のように記述したものを示す。  

```
起きる();

//朝食をとる
コーヒーを飲む

焼く(食パン)
15分待つ()
食べる(食パン)
//朝食をとる 終

歯磨きする();

着る(スーツ)

出る(家)

行く(駅)

//電車に乗る

while(not(上野東京ライン かつ 上り))
  待つ()
乗る(電車(目の前))

while(not(上野駅))
  //何もしない
降りる()

//以下略

```
無駄に長くて、読むのが疲れる。そこで、上のコードの内容を、より抽象的なグループに分け、次のようにする。  

```
起きる();

支度する(配列[コーヒー,食パン(焼く(15))],スーツ);

電車に乗る(上野東京ライン,上り,上野駅)

```
このようにすると、各コードの具体的なふるまいはわからないが、大まかに何が書かれているかをとらえやすくなる。さらにこの後ろで、例えば

```
//ここより下は、具体的な説明です

function 支度する(食事の配列,服装)
{
    foreach(食事配列 as 食べ物)
    {
            食べる(食べ物)
    }
    歯磨きする();
    着る(服装);
}
```

のように具体的に説明すれば、コード全体の 「//ここより下は、具体的な説明です」より上を見れば大まかな構造を見ることができて、具体的に知りたいものは「//ここより下は、具体的な説明です」の下から体系的に探すことができるようになる。  
同じことを繰り返し、下にいけばいくほど具体的、上にいけばいくほど抽象的な説明を与えれるのが、lcrp互換プログラミングの特徴である。  

この書き方をすると、「//ここより下は、具体的な説明です」より下のあらゆるコードは 
「function ~{ 」と 「}」の間に書かれているということになるため、  

後からlcrp隠蔽したくなった機能がある時、その機能に関するコードを持つ関数をlcrp隠蔽するだけでよい。そのため非常に効率的である。  

lcrp隠蔽を行う際、コードを書き換える必要があるが、lcrp互換プログラミングの書き方を厳密に守っていれば、その書き換えも必要最小限で済む。  










